riot.tag2("af-message",'<textarea rows="1" if="{!isright}" riot-value="{message}" oninput="{onEdit}"></textarea><div if="{isright}">{message}</div>',"",'class="{hidden : shallhide, right : isright}"',function(e){var t=this;if(t.message=e.messagetext,t.shallhide=null==t.message,t.isright=t.opts.isright,t.opts.bus&&t.opts.bus.on("updatemessagetext",function(e){t.message=e,t.shallhide=null==t.message,t.isright||setTimeout(function(){t.root.getElementsByTagName("textarea")[0].focus()},1),t.update()}),t.onEdit=function(e){var s=t.root.getElementsByTagName("textarea")[0];s.style.height="5px",s.style.height=s.scrollHeight+"px",t.message=e.target.value,t.opts.bus&&t.opts.bus.trigger("newmessagevalue",e.target.value)},!window.hasOwnProperty("getCaretCoordinates")){var s=document.createElement("script");s.src="https://askfred.today/riot_tags/af-message/getCaretPosition.js",s.onload=function(){console.log("CARET POSITION LOADED")},document.head.appendChild(s)}});