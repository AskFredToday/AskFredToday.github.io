<af-raw>
    <div></div>

    <script>
        window.sanitize = window.sanitize || function (text) {
            var sanitized;
            sanitized = text.replace(/</g, '&lt;')
            sanitized = sanitized.replace(/>/g, '&gt;')    
            sanitized = sanitized.replace(/\n/g, '<br>')
            return sanitized;
        }

        var self = this;
        this.on('mount', function() {
            if(self.opts.payload && self.opts.payload.tagname) {
                console.log('raw mount', self.opts.payload);
                riot.mount(self.root.firstChild, self.opts.payload.tagname, self.opts.payload.tagargs);
            }
            else {
                self.root.firstChild.innerHTML = sanitize(opts.text);
            }
        })
    </script>
</af-raw>
