riot.tag2("af-flextab",'<div class="flexbox"><af-rawhtml each="{tab in tabs}" class="{is-active: parent.isActiveTab(tab.id), one : true}" onclick="{parent.toggleTab}" html="{tab.title}"></af-rawhtml></div><div class="after"></div>',"","",function(t){var e=this;e.tabs=t.tabs,e.activeTab=t.active||t.tabs&&t.tabs[0],this.isActiveTab=function(t){return this.activeTab.id===t},this.toggleTab=function(t){var a=e.root.getElementsByClassName("after")[0];for(e.after=a,e.currentTarget=t.target,console.log(e.currentTarget);"AF-RAWHTML"!=e.currentTarget.tagName;)e.currentTarget=e.currentTarget.parentNode;e.afterleft=e.currentTarget.offsetLeft,a.style.left=e.afterleft-e.currentTarget.parentNode.scrollLeft+"px",a.style.width=e.currentTarget.offsetWidth+"px",e.activeTab=t.item.tab,e.opts.bus&&e.opts.bus.trigger("tabchanged",t.item.tab),e.update()},this.on("mount",function(){var t=function(){e.toggleTab({target:e.root.getElementsByClassName("is-active")[0]||e.root.getElementsByTagName("af-rawhtml")[0],item:{tab:e.activeTab}}),window.addEventListener("resize",function(){e.after.style.left=e.currentTarget.offsetLeft-e.currentTarget.parentNode.scrollLeft+"px",e.after.style.width=e.currentTarget.offsetWidth+"px"})};setTimeout(t,1),setTimeout(t,310)}),this.root});