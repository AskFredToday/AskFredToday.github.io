<af-input>
    <input value={ currentvalue } onfocus={ onFocus } onblur={ onBlur } type={ opts.type } onkeyup={ onEdit }>
    <label onclick={ focusInput }>{ opts.label }</label>
    <div class="after"></div>

    <script>
        var self = this;
        self.currentvalue = opts.initvalue;

        this.on('mount', function(){
            this.inputField = this.root.getElementsByTagName('input')[0];
            this.updateClassName();
        })

        onFocus(e) {
            self.inputField.className = 'isFocused isFilled'
        }

        onEdit(e) {
            self.currentvalue = e.target.value;
            self.opts.bus && self.opts.bus.trigger('newValue', self.opts.iid, e.target.value);
        }

        onBlur(e) {
            self.updateClassName();
            self.currentvalue = e.target.value;
            self.opts.bus && self.opts.bus.trigger('newValue', self.opts.iid, e.target.value);
        }
        
        focusInput() {
            self.inputField.focus();
        }

        updateClassName() {
            self.inputField.className = (self.inputField.value != '')?'isFilled':'';
        }

        self.opts.bus && self.opts.bus.on('setValue', function(newValue) {
            self.currentvalue = newValue;
            self.update();
        });
    </script>
</af-input>
